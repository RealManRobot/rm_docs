# 文件传输

## 下发前准备

**参数说明：**

| 参数                    | 类型 | 说明                            |
|:----------------------|:---|:------------------------------|
|`project_name`|   string   | 文件名称          |
|`file_size`|   int   | 文件大小          |
|`plan_speed`|   int   | 轨迹运行速度          |


**使用示例：**

实现：文件xxx，大小是2048，速度是50%

```json

{"command":"run_project","project_name":"XXX","file_size":2048, "plan_speed":50}

```

**返回示例：**

```json

{"command":"run_project","project_state":true}

```

| 参数                | 类型     | 说明      |
|:------------------|:-------|:----------------------------------------|
|`run_project`            | `bool` |`ture`：设置成功；`false`：设置失败 |


## 下发前准备

**参数说明：**

| 参数                    | 类型 | 说明                            |
|:----------------------|:---|:------------------------------|
|`project_name`|string|文件名称|
|`file_size`|int|文件大小|
|`plan_speed`|int|轨迹运行速度|
|`only_save`|int|仅保存文件，不运行|
|`save_id`|int|保存到控制器中的编号，支持 1-100|
|`step_flag`|int|设置单步运行方式模式 1-设置单步模式 0-设置正常运动模式|


**使用示例：**

实现：文件xxx，大小是2048，速度是50%

```json

{"command":"run_project","project_name":"XXX","file_size":2048, "plan_speed":50,"step_flag":0,"only_save":0,"save_id":0}

```

**返回示例：**

```json

{"command":"run_project","project_state":true}

```

| 参数                | 类型     | 说明      |
|:------------------|:-------|:----------------------------------------|
|`run_project`            | `bool` |`ture`：设置成功；`false`：设置失败 |


## 文件下发过程中（从第二次开始）

**参数说明：**

机械臂每收到 2K 的数据，返回一帧该指令，示教器收到后，继续
发送剩余数据

**返回示例：**

```json

{"command":"conduct_project","project_conduct":true}

```

| 参数                | 类型     | 说明      |
|:------------------|:-------|:----------------------------------------|
|`project_conduct`            | `bool` |`ture`：接收成功；`false`：接收失败 |


## 发送校验返回

**参数说明：**

| 参数                    | 类型 | 说明                            |
|:----------------------|:---|:------------------------------|
|`download_project`|string|发送校验返回|
|`project_state`| string |校验结果|
|`err_line`| bool |错误行数|


**返回成功示例：**

```json

{"command":"download_project","project_state":true}

```

| 参数                | 类型     | 说明      |
|:------------------|:-------|:----------------------------------------|
|`project_state`            | `bool` |`ture`：设置成功；`false`：设置失败 |

**返回失败示例：**

```json

{"command":"download_project","project_state":false,"err_line":60}

```

| 参数                | 类型     | 说明      |
|:------------------|:-------|:----------------------------------------|
|`project_state`            | `bool` |`ture`：设置成功；`false`：设置失败 |
|`err_line`| int | 校验失败，err_line 为有问题的工程行数，示教器弹框提示，并将该行轨迹标红。若 err_line 为 0，则代表校验数据长度不对 |

## 规划过程中改变速度系数

**参数说明：**

| 参数                    | 类型 | 说明                            |
|:----------------------|:---|:------------------------------|
|`plan_speed`| string |规划过程中改变速度系数|
|`speed`| int |速度|


**使用示例：**

实现：设置速度比例系数为50%

```json

{"command":"plan_speed","speed":50}

```

**返回示例：**

```json

{"command":"plan_speed","plan_state":true}

```

| 参数                | 类型     | 说明      |
|:------------------|:-------|:----------------------------------------|
|`plan_state`            | `bool` |`ture`：设置成功；`false`：设置失败 |


## 4.6控制器IO配置及获取

机械臂具有IO端口，基础系列数量和分类如下所示：

| 数字输出：DO | 4路，可配置为0\~12V |
| :------ | :------------ |
| 数字输入：DI | 3路，可配置为0\~12V |
| 模拟输出：AO | 4路，输出电压0\~10V |
| 模拟输入：AI | 4路，输入电压0\~10V |

I系列数量和分类如下所示：

| 数字IO：DO/DI复用 | 4路，可配置为0\~24V |
| :----------- | :------------ |

### （1）设置数字IO模式（I系列）

| 功能描述 | 设置数字IO模式               |
| :--- | :--------------------- |
| 参数说明 | `set_IO_mode`：设置数字IO模式 |
| 命令格式 | {s\:s,s\:i,s\:i}       |

**使用示例：**
说明：设置数字IO模式

```json
{"command":"set_IO_mode","IO_Num":1,"IO_mode":0}
说明：”IO_Num”：IO端口号，范围：1~4
"IO_mode"：模式，0-通用输入模式，1-通用输出模式、2-输入开始功能复用模式、3-输入暂停功能复用模式、4-输入继续功能复用模式、5-输入急停功能复用模式、6-输入进入电流环拖动复用模式、7-输入进入力只动位置拖动模式（六维力版本可配置）、8-输入进入力只动姿态拖动模式（六维力版本可配置）、9-输入进入力位姿结合拖动复用模式（六维力版本可配置）、10-输入外部轴最大软限位复用模式（外部轴模式可配置）、11-输入外部轴最小软限位复用模式（外部轴模式可配置）。
```

**返回示例：**

```json
{"command":"set_IO_mode","set_state":true}配置成功
{"command":"set_IO_mode","set_state":false}配置失败
```

### （2）设置数字IO输出状态

| 功能描述 | 设置数字IO输出                |
| :--- | :---------------------- |
| 参数说明 | `set_DO_state`：设置数字IO输出 |
| 命令格式 | {s\:s,s\:i,s\:i}        |

**使用示例：**
说明：设置数字IO模式

```json
{"command":"set_DO_state","IO_Num":1,"state":1}
```

**返回示例：**

```json
{"command":"set_DO_state","set_state":true}配置成功
{"command":"set_DO_state","set_state":false}配置失败
```

### （3）获取数字IO状态（I系列）

| 功能描述 | 获取数字IO输出状态              |
| :--- | :---------------------- |
| 参数说明 | `get_IO_state`：获取数字IO输出 |
| 命令格式 | {s\:s,s\:i}             |

**使用示例：**
说明：获取数字IO输出状态

```json
{"command":"get_IO_state","IO_Num":1}  
```

**返回示例：**

```json
{"state":"IO_state","IO_Num":1,"IO_Mode":1,"IO_state":1}
“state”：IO状态
“IO_Mode”：0-通用输入模式，1-通用输出模式、2-输入开始功能复用模式、3-输入暂停功能复用模式、4-输入继续功能复用模式、5-输入急停功能复用模式、6-输入进入电流环拖动复用模式、7-输入进入力只动位置拖动模式、8-输入进入力只动姿态拖动模式、9-输入进入力位姿结合拖动复用模式、10-输入外部轴最大软限位复用模式、11-输入外部轴最小软限位复用模式
```

### （4）获取数字IO输出状态（基础系列）

| 功能描述 | 获取数字IO输出状态              |
| :--- | :---------------------- |
| 参数说明 | `get_DO_state`：获取数字IO输出 |
| 命令格式 | {s\:s,s\:i}             |

**使用示例：**
说明：获取数字IO输出状态

```json
 {"command":"get_DO_state","IO_Num":1}   
```

**返回示例：**

```json
{"state":"DO_state","IO_Num":1,"IO_state":1}
“state”：IO状态，1-输出高，0-输出低
```

### （5）获取数字IO输入状态（基础系列）

| 功能描述 | 获取数字IO输入                  |
| :--- | :------------------------ |
| 参数说明 | `get_DI_state`：获取数字IO输入状态 |
| 命令格式 | {s\:s,s\:i}               |

**使用示例：**
说明：获取数字IO输出状态

```json
{"command":"get_DI_state","IO_Num":1}   
```

**返回示例：**

```json
{"state":"DI_state","IO_Num":1,“IO_state”：1}
“state”：IO状态，1-输入高，0-输入低
```

### （6）设置模拟IO输出状态（基础系列）

| 功能描述 | 设置模拟IO输出                |
| :--- | :---------------------- |
| 参数说明 | `set_AO_state`：设置模拟IO输出 |
| 命令格式 | {s\:s,s\:i,s\:i}        |

**使用示例：**
说明：设置模拟IO输出

```json
{"command":"set_AO_state","IO_Num":1,"voltage":1000}
```

**返回示例：**

```json
{"command":"set_AO_state","state":true}配置成功
{"command":"set_AO_state","state":false}配置失败
```

### （7）获取模拟IO输出状态（基础系列）

| 功能描述 | 获取模拟IO输出                |
| :--- | :---------------------- |
| 参数说明 | `get_AO_state`：获取模拟IO输出 |
| 命令格式 | {s\:s,s\:i}             |
|      |                         |

**使用示例：**
说明：获取模拟IO输出

```json
{"command":"get_AO_state","IO_Num":1} 
```

**返回示例：**

```json
{"state":"AO_state","IO_Num":1,"voltage":1000}
“voltage”：IO输出电压，分辨率0.001V，范围：0~10000，代表输出电压0v~10v
```

### （8）获取模拟IO输入状态（基础系列）

| 功能描述 | 获取模拟IO输入                  |
| :--- | :------------------------ |
| 参数说明 | `get_AI_state`：获取模拟IO输入状态 |
| 命令格式 | {s\:s,s\:i,s\:i}          |

**使用示例：**
说明：获取模拟IO输出

```json
{"command":"get_AI_state","IO_Num":1} 
```

**返回示例：**

```json
{"state":"AI_state","IO_Num":1,"voltage":1000}
“voltage”：IO输入电压，分辨率0.001V，范围：0~10000，代表输入电压0v~10v
```

### （9）获取所有IO输入状态

| 功能描述 | 获取所有IO输入                  |
| :--- | :------------------------ |
| 参数说明 | `get_IO_input`：获取所有IO输入状态 |
| 命令格式 | {s\:s}                    |

**使用示例：**
说明：获取所有IO输入状态

```json
 {"command":"get_IO_input"}   
```

**返回示例：**

```json
{"state":"IO_input_state","DI":[1,1,1],"AI":[1000,2000,3000,4000]}
“DI”：数字输入状态，1-高，0-低
“AI”：模拟输入电压，精度0.001V，如：1000，代表1V
```

### （10）获取所有IO输出状态

| 功能描述 | 获取所有IO输出                   |
| :--- | :------------------------- |
| 参数说明 | `get_IO_output`：获取所有IO输出状态 |

**使用示例：**
说明：获取所有IO输出

```json
{"command":"get_IO_output"}    
```

**返回示例：**

```json
{"state":"IO_output_state","DO":[1,1,1,1],"AO":[1000,2000,3000,3000]}
“DO”：数字输出状态，1-高，0-低
“AO”：模拟输出电压，精度0.001V，如：1000，代表1V
```

### （11）设置电源输出（I系列）

| 功能描述 | 设置电源输出               |
| :--- | :------------------- |
| 参数说明 | `set_voltage`：设置电源输出 |
| 命令格式 | {s\:s,s\:i}          |

**使用示例：**
说明：设置电源输出

```json
 {"command":"set_voltage","voltage_type":2}   
```

**返回示例：**

```json
{"command":"set_voltage","state":true}配置成功
{"command":"set_voltage","state":false}配置失败
```

### （12）获取电源输出（I系列）

| 功能描述 | 获取控制器电源输出类型          |
| :--- | :------------------- |
| 参数说明 | `get_voltage`：获取电源输出 |
| 命令格式 | {s\:s}               |

**使用示例：**
说明：获取控制器电源输出类型

```json
{"command":"get_voltage"}   
```

**返回示例：**

```json
{"command":"voltage_state",“voltage_type”：2}
“voltage_type”：电源输出类型，范围：0~3
0-0V，2-12V，3-24V
```

# <p class="hidden">JSON协议：</p>升降机构配置指令集

## 速度开环控制`set_lift_speed`

升降机构速度开环控制。

- **输入参数**

| 参数            | 类型 | 说明                     |
| :-------------- | :--- | :----------------------- |
| `set_lift_speed` |   `string`   | 设置升降机构速度指令。           |
| `speed` |   `int`   | 速度百分比，-100~100。speed<0：升降机构向下运动；speed>0：升降机构向上运动；speed=0：升降机构停止运动。          |


- **输出参数**

| 参数        | 类型   | 说明                                  |
| :---------- | :----- | :------------------------------------ |
| `set_state` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**


```json
// 控制升降机构以50速比运动。
{
    "command":"set_lift_speed",
    "speed":50
}
```

**输出**

```json
// 设置成功
{
    "command": "set_lift_speed",
    "set_state": true
}
```


## 位置闭环控制`set_lift_height`

升降机构位置闭环控制。

- **输入参数**

| 参数            | 类型 | 说明                     |
| :-------------- | :--- | :----------------------- |
| `set_lift_height` |   `string`   | 设置升降机构高度。           |
| `height` |   `int`   | 目标高度，单位mm，范围：0~2600。          |
| `speed` |   `int`   | 速度百分比，1-100。          |


- **输出参数**


| 参数        | 类型   | 说明                                  |
| :---------- | :----- | :------------------------------------ |
| `trajectory_state` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
// 控制升降机构以50速比运动运动到1m位置
{
    "command":"set_lift_height",
    "height":1000,
    "speed":50
}
```

**输出**

```json
// 成功到位
{
    "device": 3,
    "state": "current _trajectory_state",
    "trajectory_connect": 0,
    "trajectory_state": true
}
```


## 获取升降机构状态`get_lift_state`

- **输入参数**

| 参数            | 类型 | 说明                     |
| :-------------- | :--- | :----------------------- |
| `get_lift_state` |   `string`   | 获取升降机构状态。           |


- **输出参数**

| 参数            | 类型 | 说明                     |
| :-------------- | :--- | :----------------------- |
| `height` |   `int`   | 当前升降机构高度，单位：mm，精度：1mm，范围：0~2300。          |
| `current` |   `int`   | 当前升降驱动电流，单位：mA，精度：1mA。          |
| `err_flag` |   `int`   | 升降驱动错误代码，错误代码类型参考关节错误代码。          |
| `mode` |   `int`   | 当前升降状态，0-空闲，1-正方向速度运动，2-正方向位置运动，3-负方向速度运动，4-负方向位置运动。          |

- **代码示例**

**输入**

```json
// 获取升降机构状态
{"command":"get_lift_state"}
```

**输出**

```json
// 成功到位
{
    "current": 2554,
    "en_flag": "1",
    "err_flag": "0",
    "height": 0,
    "joint_id": 1,
    "mode": 0,
    "state":"lift_state"
}
```


# 升降机构（选配）

<div style="height: 2px; background-image: linear-gradient(to right, #ccc, #ccc); margin: 1em 0;"></div>

## 速度开环控制

升降机构速度开环控制。
**参数说明：**

| 参数            | 类型 | 说明                     |
| :-------------- | :--- | :----------------------- |
| `set_lift_speed` |   `string`   | 设置升降机构速度指令。           |
| `speed` |   `int`   | 速度百分比，-100~100。speed<0：升降机构向下运动；speed>0：升降机构向上运动；speed=0：升降机构停止运动。          |

**使用示例：**
控制升降机构以50速比运动。

```json
{"command":"set_lift_speed","speed":50}
```

**返回示例：**
设置成功。

```json
{"command":"set_lift_speed","set_state":true}
```

**参数说明：**
| 参数        | 类型   | 说明                                  |
| :---------- | :----- | :------------------------------------ |
| `set_state` | `bool` | `ture`：设置成功；`false`：设置失败。 |

## 位置闭环控制

升降机构位置闭环控制。
**参数说明：**

| 参数            | 类型 | 说明                     |
| :-------------- | :--- | :----------------------- |
| `set_lift_height` |   `string`   | 设置升降机构高度。           |
| `height` |   `int`   | 目标高度，单位mm，范围：0~2600。          |
| `speed` |   `int`   | 速度百分比，1-100。          |

**使用示例：**
控制升降机构以50速比运动运动到1m位置。

```json
{"command":"set_lift_height","height":1000,"speed":50}
```

**返回示例：**
成功到位。

```json
{"state":"current_trajectory_state","trajectory_state":true,"device":3}
```

**参数说明：**
| 参数        | 类型   | 说明                                  |
| :---------- | :----- | :------------------------------------ |
| `trajectory_state` | `bool` | `ture`：设置成功；`false`：设置失败。 |

## 获取升降机构状态

**参数说明：**

| 参数            | 类型 | 说明                     |
| :-------------- | :--- | :----------------------- |
| `get_lift_state` |   `string`   | 获取升降机构状态。           |

**使用示例：**
获取升降机构状态。

```json
{"command":"get_lift_state"}
```

**返回示例：**
成功到位。

```json
{"state":"lift_state","height":1000,"current":500,"err_flag":0,"mode":1}
```

**参数说明：**

| 参数            | 类型 | 说明                     |
| :-------------- | :--- | :----------------------- |
| `height` |   `int`   | 当前升降机构高度，单位：mm，精度：1mm，范围：0~2300。          |
| `current` |   `int`   | 当前升降驱动电流，单位：mA，精度：1mA。          |
| `err_flag` |   `int`   | 升降驱动错误代码，错误代码类型参考关节错误代码。          |
| `mode` |   `int`   | 当前升降状态，0-空闲，1-正方向速度运动，2-正方向位置运动，3-负方向速度运动，4-负方向位置运动。          |

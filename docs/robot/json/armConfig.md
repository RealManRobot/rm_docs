# <p class="hidden">JSON 协议：</p>机械臂配置指令集

## 设置运动参数

本命令集用于配置机械臂末端的线速度、线加速度、角速度、角加速度、碰撞等级的设置与查询、初始化机械臂参数、设置、恢复和查询机械臂 DH 参数、重设机关节零位补偿等。
机械臂末端参数设置完毕后，第二代需要调用[参数保存（第二代）](../json/systemConfig.md#参数保存-第二代-set-high-speed-eth)手动保存到控制器 Flash，否则断电之后不会保存。

### 设置末端最大线速度`set_arm_max_line_speed`

- **输入参数**

| 参数                     | 类型     | 说明                       |
| :----------------------- | :------- | :------------------------- |
| `set_arm_max_line_speed` | `string` | 设置机械臂末端最大线速度。 |
| `arm_line_speed`         | `int`    | 目标线速度单位：m/s。      |

::: warning 注意
建议使用默认最大线速度，如需更改，设置的机械臂末端最大线加速度与最大线速度的比值需要 ≥3，否则可能出现运动异常
:::

- **输出参数**

| 参数             | 类型   | 说明                                  |
| :--------------- | :----- | :------------------------------------ |
| `arm_line_speed` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
//实现：设置机械臂末端最大线速度 0.5m/s，分辨率 0.001m/s。
{ 
  "command": "set_arm_max_line_speed", 
  "arm_line_speed": 500 
}
```

**输出**

```json
{
  "command": "set_arm_max_line_speed",
  "arm_line_speed": true
}
```

### 设置末端最大线加速度`set_arm_max_line_acc`

- **输入参数**

| 参数                   | 类型     | 说明                         |
| :--------------------- | :------- | :--------------------------- |
| `set_arm_max_line_acc` | `string` | 设置机械臂末端最大线加速度。 |
| `arm_line_acc`         | `int`    | 目标线加速度单位：m/s²。     |

::: warning 注意
建议使用默认最大线加速度，如需更改，设置的机械臂末端最大线加速度与最大线速度的比值需要 ≥3，否则可能出现运动异常
:::

- **输出参数**

| 参数           | 类型   | 说明                                  |
| :------------- | :----- | :------------------------------------ |
| `arm_line_acc` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
// 实现：设置机械臂末端最大线加速度 2m/s²，分辨率 0.001m/s²。
{ 
  "command": "set_arm_max_line_acc", 
  "arm_line_acc": 2000 
}
```

**输出**

```json
{
  "command": "set_arm_max_line_acc",
  "arm_line_acc": true
}
```

### 设置末端最大角速度`set_arm_max_angular_speed`

- **输入参数**

| 参数                        | 类型     | 说明                       |
| :-------------------------- | :------- | :------------------------- |
| `set_arm_max_angular_speed` | `string` | 设置机械臂末端最大角速度。 |
| `arm_angular_speed`         | `int`    | 目标角速度单位：rad/s。    |

::: warning 注意
建议使用默认最大角速度，如需更改，设置的机械臂末端最大角加速度与最大角速度的比值需要 ≥3，否则可能出现运动异常
:::

- **输出参数**

| 参数                | 类型   | 说明                                  |
| :------------------ | :----- | :------------------------------------ |
| `arm_angular_speed` | `bool` | `ture`：设置成功；`false`：设置失败。 |

**输入**

```json
// 实现：设置机械臂末端最大角速度 0.2rad/s，分辨率 0.001rad/s。
{ 
  "command": "set_arm_max_angular_speed", 
  "arm_angular_speed": 200 
}
```

**输出**

```json
{
  "command": "set_arm_max_angular_speed",
  "arm_angular_speed": true
}
```

### 设置末端最大角加速度`set_arm_max_angular_acc`

- **输入参数**

| 参数                      | 类型     | 说明                         |
| :------------------------ | :------- | :--------------------------- |
| `set_arm_max_angular_acc` | `string` | 设置机械臂末端最大角加速度。 |
| `arm_angular_acc`         | `int`    | 目标角加速度单位：rad/s²。   |

::: warning 注意
建议使用默认最大角加速度，如需更改，设置的机械臂末端最大角加速度与最大角速度的比值需要 ≥3，否则可能出现运动异常
:::

- **输出参数**

| 参数              | 类型   | 说明                                  |
| :---------------- | :----- | :------------------------------------ |
| `arm_angular_acc` | `bool` | `ture`：设置成功；`false`：设置失败。 |

**输入**

```json
// 实现：设置机械臂末端最大角加速度 4rad/s²，分辨率 0.001rad/s²。
{ 
  "command": "set_arm_max_angular_acc", 
  "arm_angular_acc": 4000 
}
```

**输出**

```json
{
  "command": "set_arm_max_angular_acc",
  "arm_angular_acc": true
}
```

### 初始化机械臂参数`set_arm_max_angular_acc`

- **输入参数**

| 参数                      | 类型     | 说明               |
| :------------------------ | :------- | :----------------- |
| `set_arm_max_angular_acc` | `string` | 初始化机械臂参数。 |

- **输出参数**

| 参数       | 类型   | 说明                                  |
| :--------- | :----- | :------------------------------------ |
| `arm_init` | `bool` | `ture`：设置成功；`false`：设置失败。 |

**输入**

```json
// 实现：初始化机械臂参数，机械臂的末端参数恢复到默认值。
// 末端线速度：0.25m/s; 末端线加速度：1.6m/s²;
// 末端角速度：0.6rad/s; 末端角加速度：4rad/s²。
{ "command": "set_arm_init" }
```

**输出**

```json
{
  "command": "set_arm_init",
  "arm_init": true
}
```

### 设置碰撞防护等级`set_collision_stage`

- **输入参数**

| 参数                  | 类型     | 说明                     |
| :-------------------- | :------- | :----------------------- |
| `set_collision_stage` | `string` | 设置机械臂碰撞防护等级。 |
| `collision_stage`     | `int`    | 等级，范围：0~8。        |

- **输出参数**

| 参数              | 类型   | 说明                                  |
| :---------------- | :----- | :------------------------------------ |
| `collision_state` | `bool` | `ture`：设置成功；`false`：设置失败。 |

**输入**

```json
// 实现：设置机械臂碰撞防护等级 1，等级越高，检测越灵敏。
{ 
  "command": "set_collision_stage", 
  "collision_stage": 1 
}
```

**输出**

```json
{
  "command": "set_collision_state",
  "collision_state": true
}
```

### 查询碰撞防护等级`get_collision_stage`

- **输入参数**

| 参数                  | 类型     | 说明               |
| :-------------------- | :------- | :----------------- |
| `get_collision_stage` | `string` | 查询碰撞防护等级。 |

- **输出参数**

| 参数              | 类型  | 说明              |
| :---------------- | :---- | :---------------- |
| `collision_stage` | `int` | 等级，范围：0~8。 |

- **代码示例**

**输入**

```json
// 实现：查询碰撞防护等级。
{ "command": "get_collision_stage" }
```

**输出**

```json
{
  "state": "get_collision_stage",
  "collision_stage": 5
}
```

### 重新设置 DH 参数`set_DH_data`

::: tip 提示
第三代控制器适用
:::

- **输入参数**

| 参数          | 类型  | 说明                     |
| :------------ | :---- | :----------------------- |
| `set_DH_data` | `int` | 重新设置机械臂 DH 参数。 |

::: warning 注意
该指令用户不可自行使用，必须配合测量设备进行绝对精度补偿时方可使用，否则会导致机械臂参数错误！
:::

- **输出参数**

| 参数        | 类型   | 说明                                  |
| :---------- | :----- | :------------------------------------ |
| `set_state` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
// 实现：每个关节有四组数据，分别表示 alpha、a、d、offset，
// 示例中表示 1°、0.002m、0.003m 和 4°。
```

```json
// 6 自由度机械臂：
{
  "command": "set_DH_data",
  "joint_1": [1000, 2000, 3000, 4000],
  "joint_2": [1000, 2000, 3000, 4000],
  "joint_3": [1000, 2000, 3000, 4000],
  "joint_4": [1000, 2000, 3000, 4000],
  "joint_5": [1000, 2000, 3000, 4000],
  "joint_6": [1000, 2000, 3000, 4000]
}
```

```json
// 7 自由度机械臂：
{
  "command": "set_DH_data",
  "joint_1": [1000, 2000, 3000, 4000],
  "joint_2": [1000, 2000, 3000, 4000],
  "joint_3": [1000, 2000, 3000, 4000],
  "joint_4": [1000, 2000, 3000, 4000],
  "joint_5": [1000, 2000, 3000, 4000],
  "joint_6": [1000, 2000, 3000, 4000],
  "joint_7": [1000, 2000, 3000, 4000]
}
```

**输出**

```json
{
  "command": "set_DH_data",
  "set_state": true
}
```

### 查询 DH 参数`get_DH_data`

::: tip 提示
第三代控制器适用
:::

- **输入参数**

| 参数          | 类型     | 说明                 |
| :------------ | :------- | :------------------- |
| `get_DH_data` | `string` | 查询机械臂 DH 参数。 |

- **输出参数**

| 参数      | 类型    | 说明                                                                                    |
| :-------- | :------ | :-------------------------------------------------------------------------------------- |
| `joint_1` | `array` | 每个关节有四组数据，分别表示 alpha、a、d、offset，示例中表示 1°、0.002m、0.003m 和 4°。 |

- **代码示例**

  **输入**

```json
// 实现：查询机械臂 DH 参数。
{ "command": "get_DH_data" }
```

**输出**

```json
// 6 自由度机械臂：
{
  "command": "get_DH_data",
  "joint_1": [1000, 2000, 3000, 4000],
  "joint_2": [1000, 2000, 3000, 4000],
  "joint_3": [1000, 2000, 3000, 4000],
  "joint_4": [1000, 2000, 3000, 4000],
  "joint_5": [1000, 2000, 3000, 4000],
  "joint_6": [1000, 2000, 3000, 4000]
}
```

```json
// 7 自由度机械臂：
{
  "command": "get_DH_data",
  "joint_1": [1000, 2000, 3000, 4000],
  "joint_2": [1000, 2000, 3000, 4000],
  "joint_3": [1000, 2000, 3000, 4000],
  "joint_4": [1000, 2000, 3000, 4000],
  "joint_5": [1000, 2000, 3000, 4000],
  "joint_6": [1000, 2000, 3000, 4000],
  "joint_7": [1000, 2000, 3000, 4000]
}
```

### 恢复机械臂默认 DH 参数`set_DH_data_default`

::: tip 提示
第三代控制器适用
:::

- **输入参数**

| 参数                  | 类型     | 说明                     |
| :-------------------- | :------- | :----------------------- |
| `set_DH_data_default` | `string` | 恢复机械臂默认 DH 参数。 |

- **输出参数**

| 参数        | 类型   | 说明                                  |
| :---------- | :----- | :------------------------------------ |
| `set_state` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
// 实现：恢复机械臂默认 DH 参数。
{ "command": "set_DH_data_default" }
```

**输出**

```json
{
  "command": "set_DH_data_default",
  "set_state": true
}
```

### 重设关节零位补偿`set_joint_zero_offset`

重新设置关节零位补偿角度，用于校正绝对定位精度。

- **输入参数**

| 参数                    | 类型  | 说明                       |
| :---------------------- | :---- | :------------------------- |
| `set_joint_zero_offset` | `int` | 重新设置关节零位补偿角度。 |

::: warning 注意
该指令用户不可自行使用，必须配合测量设备进行绝对精度补偿时方可使用，否则会导致机械臂参数错误！
:::

- **输出参数**

| 参数        | 类型   | 说明                                  |
| :---------- | :----- | :------------------------------------ |
| `set_state` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**
  **输入**

```json
// 实现：设置关节零位偏移，精度：0.001° 关节 1~6 的零位补偿角度：1°，-2°，3°，-4°，5°，-6°。
{
  "command": "set_joint_zero_offset",
  "offset": [1000, -2000, 3000, -4000, 5000, -6000]
}
```

**输出**

```json
{
  "command": "set_joint_zero_offset",
  "set_state": true
}
```

## 查询运动参数

本命令集用于查询机械臂末端的最大线速度、线加速度、角速度、角加速度。

### 查询末端最大线速度`get_arm_max_line_speed`

- **输入参数**

| 参数                     | 类型     | 说明                       |
| :----------------------- | :------- | :------------------------- |
| `get_arm_max_line_speed` | `string` | 查询机械臂末端最大线速度。 |

- **输出参数**

| 参数                 | 类型  | 说明                       |
| :------------------- | :---- | :------------------------- |
| `arm_max_line_speed` | `int` | 反馈机械臂末端最大线速度。 |

- **代码示例**

**输入**

```json
//  实现：查询机械臂末端最大线速度。
{ "command": "get_arm_max_line_speed" }
```

**输出**

```json
// 反馈机械臂末端最大线速度，0.5m/s，分辨率：0.001m/s。
{
  "state": "arm_max_line_speed",
  "arm_line_speed": 500
}
```

### 查询末端最大线加速度`get_arm_max_line_acc`

- **输入参数**

| 参数                   | 类型     | 说明                         |
| :--------------------- | :------- | :--------------------------- |
| `get_arm_max_line_acc` | `string` | 查询机械臂末端最大线加速度。 |

- **输出参数**

| 参数               | 类型  | 说明                         |
| :----------------- | :---- | :--------------------------- |
| `arm_max_line_acc` | `int` | 反馈机械臂末端最大线加速度。 |

- **代码示例**

**输入**

```json
//  实现：查询机械臂末端最大线加速度。
{ "command": "get_arm_max_line_acc" }
```

**输出**

```json
// 反馈机械臂末端最大线加速度，0.2m/s²，分辨率：0.001m/s²。
{
  "state": "arm_max_line_acc",
  "arm_line_acc": 200
}
```

### 查询末端最大角速度`get_arm_max_angular_speed`

- **输入参数**

| 参数                        | 类型     | 说明                       |
| :-------------------------- | :------- | :------------------------- |
| `get_arm_max_angular_speed` | `string` | 查询机械臂末端最大角速度。 |

- **输出参数**

| 参数                    | 类型  | 说明                       |
| :---------------------- | :---- | :------------------------- |
| `arm_max_angular_speed` | `int` | 反馈机械臂末端最大角速度。 |

- **代码示例**

**输入**

```json
//  实现：查询机械臂末端最大角速度。
{ "command": "get_arm_max_angular_speed" }
```

**输出**

```json
// 反馈机械臂末端最大角速度，1rad/s，分辨率：0.001rad/s。
{
  "state": "arm_max_angular_speed",
  "arm_angular_speed": 1000
}
```

### 查询末端最大角加速度`get_arm_max_angular_acc`

- **输入参数**

| 参数                      | 类型     | 说明                         |
| :------------------------ | :------- | :--------------------------- |
| `get_arm_max_angular_acc` | `string` | 查询机械臂末端最大角加速度。 |

- **输出参数**

| 参数                  | 类型  | 说明                         |
| :-------------------- | :---- | :--------------------------- |
| `arm_max_angular_acc` | `int` | 反馈机械臂末端最大角加速度。 |

- **代码示例**
  **输入**

```json
//  实现：查询机械臂末端最大角加速度。
{ "command": "get_arm_max_angular_acc" }
```

**输出**
实现：反馈机械臂末端最大角加速度，10rad/s²，分辨率：0.001rad/s²。

```json
{
  "state": "arm_max_angular_acc",
  "arm_angular_acc": 10000
}
```

## 工具坐标系

本命令集用于配置机械臂的工具坐标系，包含计算工具坐标系、输入工具坐标系、切换当前工具坐标系、删除工具坐标系、修改工具坐标系、设置和查询工具坐标系包络参数等。

### 自动计算工具坐标系（标定参考点）`set_auto_tool_frame`

将当前机械臂的末端点设置为计算工作坐标系的参考点，参考点基于六点法的要求进行设置。

::: warning 注意
机械臂只能存储 10 个工具坐标系，若超过 10 个，则新建立工具不成功
:::

- **输入参数**

| 参数                  | 类型     | 说明               |
| :-------------------- | :------- | :----------------- |
| `set_auto_tool_frame` | `string` | 一键设置关节限位。 |
| `point_num`           | `int`    | 1~6 为标定参考点。 |

- **输出参数**

| 参数              | 类型   | 说明                                  |
| :---------------- | :----- | :------------------------------------ |
| `auto_tool_frame` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**
  **输入**

::: info 备注
机械臂上电初始化后，默认无负载。以下指令需逐行运行
:::

```json
//  实现：自动计算工具坐标系，标定当前位置为参考点 6。
{"command":"set_auto_tool_frame","point_num":1}
{"command":"set_auto_tool_frame","point_num":2}
{"command":"set_auto_tool_frame","point_num":3}
{"command":"set_auto_tool_frame","point_num":4}
{"command":"set_auto_tool_frame","point_num":5}
{"command":"set_auto_tool_frame","point_num":6}
```

**输出**

```json
{
  "command": "set_auto_tool_frame",
  "auto_tool_frame": true
}
```

### 自动计算工具坐标系（自动计算生成工具）`set_auto_tool_frame`

通过[自动计算工具坐标系（标定参考点）](#自动计算工具坐标系-标定参考点-set-auto-tool-frame)成功标定 6 个参考点之后，运行此指令配置工具坐标系。

> 自动计算工具坐标系（六点法）：机械臂只能存储 10 个工具坐标系，若超过 10 个，则新建立工具不成功。

- **输入参数**

| 参数                  | 类型     | 说明                                 |
| :-------------------- | :------- | :----------------------------------- |
| `set_auto_tool_frame` | `string` | 自动计算工具坐标系。                 |
| `tool_name`           | `string` | 工具坐标系名称，不能超过 10 个字符。 |
| `payload`             | `int`    | 单位：g，最高不超过 5000g            |
| `position`            | `int`    | 质心位置，单位：mm，精度 0.001mm     |

- **输出参数**

| 参数              | 类型   | 说明                                  |
| :---------------- | :----- | :------------------------------------ |
| `auto_tool_frame` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**
  **输入**

::: info 备注
机械臂上电初始化后，默认无负载
:::

```json
//  实现：自动计算工具坐标系，名称为 tool2_frame，末端负载 5000g，质心位置：x-1mm,y-2mm,z-3mm。
{
  "command": "set_auto_tool_frame",
  "tool_name": "tool_frame",
  "payload": 5000,
  "position": [1000, 2000, 3000]
}
```

**输出**

```json
{
  "command": "set_auto_tool_frame",
  "auto_tool_frame": true
}
```

### 手动输入工具坐标系`set_auto_tool_frame`

::: tip 提示
手动输入工具坐标系：机械臂只能存储 10 个工具坐标系，若超过 10 个，则新建立工具不成功
:::

- **输入参数**

| 参数                  | 类型  | 说明                                 |
| :-------------------- | :---- | :----------------------------------- |
| `set_auto_tool_frame` | `int` | 自动计算工具坐标系。                 |
| `tool_name`           | `int` | 工具坐标系名称，不能超过 10 个字符。 |
| `payload`             | `int` | 单位：g，最高不超过 5000g            |
| position              | `int` | 质心位置，单位：mm，精度 0.001mm     |

- **输出参数**

| 参数                | 类型   | 说明                                  |
| :------------------ | :----- | :------------------------------------ |
| `manual_tool_frame` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

::: info 备注
机械臂上电初始化后，默认无负载
:::

```json
//  实现：手动输入工具坐标系，配置参数如下：
//  名称：tool_frame;
//  工具位置：x：0.1m，y:0.2m，z：0.03m;
//  位置精度：0.001mm工具姿态：rx：0.4rad，ry：0.5rad，rz：0.6rad;
//  姿态精度：0.001rad末端负载5000g;
//  质心位置：x-1mm,y-2mm,z-3mm;
//  payload：单位：g，最高不超过5000g；
//  position：质心位置，单位：mm，精度0.001mm。
{
  "command": "set_manual_tool_frame",
  "tool_name": "tool_frame",
  "tool_pose": [100000, 200000, 30000, 400, 500, 600],
  "payload": 5000,
  "position": [1000, 2000, 3000]
}
```

**输出**

```json
{
  "command": "set_manual_tool_frame",
  "manual_tool_frame": true
}
```

### 切换当前工具坐标系`set_change_tool_frame`

- **输入参数**

| 参数                    | 类型     | 说明                                 |
| :---------------------- | :------- | :----------------------------------- |
| `set_change_tool_frame` | `string` | 切换当前工具坐标系。                 |
| `tool_name`             | `string` | 工具坐标系名称，不能超过 10 个字符。 |

- **输出参数**

| 参数                | 类型   | 说明                                  |
| :------------------ | :----- | :------------------------------------ |
| `change_tool_frame` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
// 实现：切换当前工具坐标系，名称 tool2_frame。
{ "command": "set_change_tool_frame", "tool_name": "tool2_frame" }
```

**输出**

```json
{
  "command": "set_change_tool_frame",
  "change_tool_frame": true
}
```

### 删除工具坐标系`set_delete_tool_frame`

- **输入参数**

| 参数                    | 类型     | 说明                                 |
| :---------------------- | :------- | :----------------------------------- |
| `set_delete_tool_frame` | `string` | 删除工具坐标系。                     |
| `tool_name`             | `string` | 工具坐标系名称，不能超过 10 个字符。 |

- **输出参数**

| 参数                | 类型   | 说明                                  |
| :------------------ | :----- | :------------------------------------ |
| `delete_tool_frame` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
// 实现：删除工具坐标系，名称 tool2_frame。
{ "command": "set_delete_tool_frame", "tool_name": "tool2_frame" }
```

**输出**

```json
{
  "command": "set_delete_tool_frame",
  "delete_tool_frame": true
}
```

### 修改工具坐标系`update_tool_frame`

修改工具坐标系。

- **输入参数**

| 参数                | 类型     | 说明                                 |
| :------------------ | :------- | :----------------------------------- |
| `update_tool_frame` | `string` | 修改工具坐标系参数。                 |
| `tool_name`         | `string` | 工具坐标系名称，不能超过 10 个字符。 |
| `tool_pose`         | `int`    | 工具相对机械臂末端法兰中心位姿       |

- **输出参数**

| 参数           | 类型   | 说明                                  |
| :------------- | :----- | :------------------------------------ |
| `update_state` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
// 实现：指定要修改的工具坐标系，配置参数如下：
// 名称：tool_frame；
// 工具位置：x：0.1m，y:0.2m，z：0.03m；
// 位置精度：0.001mm；
// 工具姿态：rx：0.4rad，ry：0.5rad，rz：0.6rad；
// 姿态精度：0.001rad；
// 末端负载5000g；
// 质心位置：x-1mm,y-2mm,z-3mm；
// payload：单位：g，最高不超过5000g；
// position：质心位置，单位：mm，精度0.001mm。
{
  "command": "update_tool_frame",
  "tool_name": "tool_frame",
  "tool_pose": [100000, 200000, 30000, 400, 500, 600],
  "payload": 5000,
  "position": [1000, 2000, 3000]
}
```

**输出**

```json
{
  "command": "update_tool_frame",
  "update_state": true
}
```

### 设置工具坐标系包络参数`set_tool_envelope`

- **输入参数**

| 参数                | 类型     | 说明                                                                         |
| :------------------ | :------- | :--------------------------------------------------------------------------- |
| `set_tool_envelope` | `string` | 设置工具坐标系包络参数。                                                     |
| `tool_name`         | `string` | 控制器中已存在的工具坐标系名称，如果不存在该字段，则为临时设置当前包络参数。 |
| `list`              | `int`    | 包络参数列表，每个工具最多支持 5 个包络球，可以没有包络。                    |
| `name`              | `string` | 工具包络球体的名称，1-10 个字节，支持字母数字下划线。                        |
| `radius`            | `int`    | 工具包络球体的半径，单位 0.001m。                                            |
| `x`                 | `int`    | 工具包络球体球心基于末端法兰坐标系的 X 轴坐标，单位 0.001m。                 |
| `y`                 | `int`    | 工具包络球体球心基于末端法兰坐标系的 Y 轴坐标，单位 0.001m。                 |
| `z`                 | `int`    | 工具包络球体球心基于末端法兰坐标系的 Z 轴坐标，单位 0.001m。                 |

- **输出参数**

| 参数        | 类型   | 说明                                  |
| :---------- | :----- | :------------------------------------ |
| `set_state` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
// 实现：名为 left 工具包络球的半径为 0.02m,球心 x 坐标 0.01m,球心 y 坐标 0.02m,z 坐标 0.03m;
// 名为 right 工具包络球的半径为 0.03m,球心 x 坐标 0.03m,球心 y 坐标 0.04m,z 坐标 0.05m;
// 名为 center 工具包络球的半径为 0.04m,球心 x 坐标 0.05m,球心 y 坐标 0.06m,z 坐标 0.07m;
{
  "command": "set_tool_envelope",
  "tool_name": "test",
  "list": [
    { "name": "left", "radius": 20, "x": 10, "y": 20, "z": 30 },
    { "name": "right", "radius": 30, "x": 30, "y": 40, "z": 50 },
    { "name": "center", "radius": 40, "x": 50, "y": 60, "z": 70 }
  ]
}
```

**输出**

```json
{
  "command": "set_tool_envelope",
  "set_state": true
}
```

### 查询工具坐标系包络参数`get_tool_envelope`

- **输入参数**

| 参数                | 类型     | 说明                                                                 |
| :------------------ | :------- | :------------------------------------------------------------------- |
| `get_tool_envelope` | `string` | 查询工具的包络参数.                                                  |
| `tool_name`         | `string` | 指定要查询的工具坐标系名称，如果不存在该字段，则为查询当前包络参数。 |

- **输出参数**

| 参数        | 类型     | 说明                                                                                        |
| :---------- | :------- | :------------------------------------------------------------------------------------------ |
| `tool_name` | `string` | 控制器中已存在的工具坐标系名称。                                                            |
| `list`      | `array`  | 包络参数列表，每个工具最多支持 5 个包络球，可以没有包络                                     |
| `name`      | `string` | 工具包络球体的名称，1-10 个字节，支持字母数字下划线                                         |
| `radius`    | `number` | 工具包络球体的半径，单位 0.001m，示例中 left 的半径为 0.02m                                 |
| `x`         | `number` | 工具包络球体球心基于末端法兰坐标系的 X 轴坐标，单 0.001m，示例中 left 的球心 x 坐标 0.01m   |
| `y`         | `number` | 工具包络球体球心基于末端法兰坐标系的 Y 轴坐标，单位 0.001m，示例中 left 的球心 y 坐标 0.02m |
| `z`         | `number` | 工具包络球体球心基于末端法兰坐标系的 Z 轴坐标，单位 0.001m，示例中 left 的球心 z 坐标 0.03m |

- **代码示例**

**输入**

```json
// 实现：查询名为 tool1 工具坐标系的包络参数。
{ 
  "command": "get_tool_envelope",
  "tool_name": "tool1"
}
```

**输出**

```json
// 查询结果:
{
  "command": "get_tool_envelope",
  "tool_name": "test",
  "list": [
    {
      "name": "left",
      "radius": 20,
      "x": 10,
      "y": 20,
      "z": 30
    },
    {
      "name": "right",
      "radius": 30,
      "x": 30,
      "y": 40,
      "z": 50
    },
    {
      "name": "center",
      "radius": 40,
      "x": 50,
      "y": 60,
      "z": 70
    }
  ]
}
```

```json
// 查询失败:
{ 
  "command": "get_tool_envelope", 
  "get_state": false 
}
```

## 工作坐标系

本命令集用于配置机械臂的工作坐标系，包含手动设置坐标系、输入工具坐标系、切换当前工具坐标系、删除工具坐标系、修改工具坐标系等。

### 自动设置工作坐标系`set_auto_work_frame`

::: tip 提示
机械臂只能存储 10 个工作坐标系，若超过 10 个，则新建立坐标系不成功
:::

- **输入参数**

| 参数                  | 类型     | 说明                                                                                       |
| :-------------------- | :------- | :----------------------------------------------------------------------------------------- |
| `set_auto_work_frame` | `string` | 自动设置工作坐标系。                                                                       |
| `frame_name`          | `string` | 工作坐标系名称，不能超过 10 个字符                                                         |
| `point_num`           | `int`    | 参考点 1~3 代表工作坐标系原点、X 轴一点和 Y 轴上一点，4 代表根据前三个标定点计算工作坐标系 |

- **输出参数**

| 参数              | 类型   | 说明                                  |
| :---------------- | :----- | :------------------------------------ |
| `auto_work_frame` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**
  **输入**

```json
// 实现：设置工作坐标系，名称 work2_frame，将当前位置标定为参考点 3（Y 轴上一点）。
{ 
  "command": "set_auto_work_frame", 
  "frame_name": "work_frame", 
  "point_num": 3 
}
```

**输出**

```json
{
  "command": "set_auto_work_frame",
  "auto_work_frame": true
}
```

### 手动输入工作坐标系`set_manual_work_frame`

::: tip 提示
机械臂只能存储 10 个工作坐标系，若超过 10 个，则新建立坐标系不成功
:::

- **输入参数**

| 参数                    | 类型     | 说明                               |
| :---------------------- | :------- | :--------------------------------- |
| `set_manual_work_frame` | `string` | 手动输入工作坐标系。               |
| `frame_name`            | `string` | 工作坐标系名称，不能超过 10 个字符 |
| `frame_pose`            | `int`    | 工作位置                           |

- **输出参数**

| 参数                | 类型   | 说明                                  |
| :------------------ | :----- | :------------------------------------ |
| `manual_work_frame` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**
  **输入**

```json
//实现：手动输入工作坐标系，配置参数如下：
//名称：work_frame；
//坐标系位置：x：0.1m，y:0.2m，z：0.03m；
//位置精度：0.001mm；
//坐标系姿态：rx：0.4rad，ry：0.5rad，rz：0.6rad；
//姿态精度：0.001rad。
{
  "command": "set_manual_work_frame",
  "frame_name": "work_frame",
  "frame_pose": [100000, 200000, 30000, 400, 500, 600]
}
```

**输出**

```json
{
  "command": "set_manual_work_frame",
  "manual_work_frame": true
}
```

### 切换当前工作坐标系`set_change_work_frame`

- **输入参数**

| 参数                    | 类型     | 说明                               |
| :---------------------- | :------- | :--------------------------------- |
| `set_change_work_frame` | `string` | 切换当前工作坐标系。               |
| `frame_name`            | `string` | 工作坐标系名称，不能超过 10 个字符 |

- **输出参数**

| 参数                | 类型   | 说明                                  |
| :------------------ | :----- | :------------------------------------ |
| `change_work_frame` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
//  实现：切换当前工作坐标系，名称 work2_frame。
{ 
  "command": "set_change_work_frame", 
  "frame_name": "work2_frame"
}
```

**输出**

```json
{
  "command": "set_change_work_frame",
  "change_work_frame": true
}
```

### 删除工作坐标系`set_delete_work_frame`

- **输入参数**

| 参数                    | 类型     | 说明                               |
| :---------------------- | :------- | :--------------------------------- |
| `set_delete_work_frame` | `string` | 删除工作坐标系。                   |
| `frame_name`            | `string` | 工作坐标系名称，不能超过 10 个字符 |

- **输出参数**

| 参数                | 类型   | 说明                                  |
| :------------------ | :----- | :------------------------------------ |
| `delete_work_frame` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
//  实现：删除工作坐标系，名称 work2_frame。
{ 
  "command": "set_delete_work_frame", 
  "frame_name": "work2_frame" 
}
```

**输出**

```json
{
  "command": "set_delete_work_frame",
  "delete_work_frame": true
}
```

### 修改工作坐标系`update_work_frame`

- **输入参数**

| 参数                | 类型     | 说明                               |
| :------------------ | :------- | :--------------------------------- |
| `update_work_frame` | `string` | 修改工作坐标系。                   |
| `frame_name`        | `string` | 工作坐标系名称，不能超过 10 个字符 |
| `frame_pose`        | `string` | 工作位置                           |

- **输出参数**

| 参数           | 类型   | 说明                                  |
| :------------- | :----- | :------------------------------------ |
| `update_state` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
//  实现：修改指定工作坐标系，配置参数如下：
//  名称:work_frame;
//  坐标系位置：x：0.1m，y:0.2m，z：0.03m;
//  位置精度：0.001mm;
//  坐标系姿态：rx：0.4rad，ry：0.5rad，rz：0.6rad;
//  姿态精度：0.001rad。
{
  "command": "update_work_frame",
  "frame_name": "work_frame",
  "frame_pose": [100000, 200000, 30000, 400, 500, 600]
}
```

**输出**

```json
{
  "command": "update_work_frame",
  "update_state": true
}
```

## 机械臂状态查询集

### 查询机械臂状态`get_current_arm_state`

- **输入参数**

| 参数                    | 类型     | 说明             |
| :---------------------- | :------- | :--------------- |
| `get_current_arm_state` | `string` | 查询机械臂状态。 |

- **输出参数**

| 参数                | 类型     | 说明             |
| :------------------ | :------- | :--------------- |
| `current_arm_state` | `string` | 反馈机械臂状态。 |
| `joint`             | `int`    | 关节角度         |
| `pose`              | `int`    | 末端位姿         |
| `arm_err`           | `int`    | 机械臂错误代码   |
| `sys_err`           | `int`    | 控制器错误代码   |

- **代码示例**

**输入**

```json
//  实现：查询机械臂状态。
{ "command": "get_current_arm_state" }
```

**输出**

```json
// 反馈机械臂状态，信息如下：

// 六自由度机械臂关节1~6角度依次为：0.1°，0.2°，0.3°。0.4°，0.5°，0.6°，精度：0.001°；
// 七自由度机械臂关节1~7角度依次为：0.1°，0.2°，0.3°。0.4°，0.5°，0.6°，0.7°，精度：0.001°；
// 位置：x：0.1m，y:0.2m，z：0.03m，位置精度：0.001mm；
// 姿态：rx：0.4rad，ry：0.5rad，rz：0.6rsd，姿态精度：0.001rad；
// arm_err：机械臂错误代码，指机械臂运行规划中的软件错误：0；
// sys_err：控制器错误代码，指控制器运行过程中的硬件错误：0。

```

```json
// 六自由度：
{
  "state": "current_arm_state",
  "arm_state": {
    "joint": [100, 200, 300, 400, 500, 600],
    "pose": [100000, 200000, 30000, 400, 500, 600],
    "arm_err": 0,
    "sys_err": 0
  }
}
```

```json
// 七自由度：
{
  "state": "current_arm_state",
  "arm_state": {
    "joint": [100, 200, 300, 400, 500, 600, 700],
    "pose": [100000, 200000, 30000, 400, 500, 600],
    "arm_err": 0,
    "sys_err": 0
  }
}
```

### 查询关节温度`get_current_joint_temperature`

- **输入参数**

| 参数                            | 类型     | 说明           |
| :------------------------------ | :------- | :------------- |
| `get_current_joint_temperature` | `string` | 查询关节温度。 |

- **输出参数**

| 参数                        | 类型  | 说明                              |
| :-------------------------- | :---- | :-------------------------------- |
| `current_joint_temperature` | `int` | 反馈关节温度单位：℃，精度：0.001℃ |

- **代码示例**

**输入**

```json
//  实现：查询关节温度。
{ "command": "get_current_joint_temperature" }
```

**输出**

```json
// 反馈关节温度，参数如下：

// 六自由度机械臂关节温度[27.5,28.0,26.8,26.8,28.9,30.1]；
// 七自由度机械臂关节温度[27.5,28.0,26.8,26.8,28.9,30.1,31.1]；单位：℃，精度：0.001℃。
```

```json
// 六自由度:
{
  "state": "current_joint_temperature",
  "joint_temperature": [27500, 28000, 26800, 26800, 28900, 30100]
}
```

```json
// 七自由度:
{
  "state": "current_joint_temperature",
  "joint_temperature": [27500, 28000, 26800, 26800, 28900, 30100, 31100]
}
```

### 查询关节当前电流`get_current_joint_current`

- **输入参数**

| 参数                        | 类型     | 说明               |
| :-------------------------- | :------- | :----------------- |
| `get_current_joint_current` | `string` | 查询关节当前电流。 |

- **输出参数**

| 参数                    | 类型  | 说明                                      |
| :---------------------- | :---- | :---------------------------------------- |
| `current_joint_current` | `int` | 反馈关节当前电流单位：mA，精度：0.001mA。 |

- **代码示例**
  **输入**

```json
//  实现：查询关节当前电流。
{ "command": "get_current_joint_current" }
```

**输出**

```json
// 反馈关节当前电流，参数如下：

// 六自由度机械臂关节1~6电流依次为：
// 0.065mA，-0.2mA，0.17mA，0.2mA，-0.3mA，0.168mA。

// 七自由度机械臂关节1~7电流依次为：
// 0.065mA，-0.2mA,0.17mA，0.2mA，-0.3mA，0.168mA，0.178mA。
```

```json
// 六自由度：
{
  "state": "current_joint_current",
  "joint_current": [65, -200, 170, 200, -300, 168]
}
```

```json
// 七自由度：
{
  "state": "current_joint_current",
  "joint_current": [65, -200, 170, 200, -300, 168, 178]
}
```

### 查询关节当前电压`get_current_joint_voltage`

- **输入参数**

| 参数                        | 类型     | 说明               |
| :-------------------------- | :------- | :----------------- |
| `get_current_joint_voltage` | `string` | 查询关节当前电压。 |

- **输出参数**

| 参数                    | 类型  | 说明                                    |
| :---------------------- | :---- | :-------------------------------------- |
| `current_joint_voltage` | `int` | 反馈关节当前电压单位：V，精度：0.001V。 |

- **代码示例**

**输入**

```json
//  实现：查询关节当前电压。
{ "command": "get_current_joint_voltage" }
```

**输出**

```json
// 反馈关节当前电压，参数如下：

// 六自由度机械臂关节1~6电压依次为27.5V,28.0V,26.8V,26.8V,28.9V,30.1V。
// 七自由度机械臂关节1~7电压依次为27.5V,28.0V,26.8V,26.8V,28.9V,30.1V,31.1V。
```

```json
// 六自由度：
{
  "state": "current_joint_voltage",
  "joint_voltage": [27500, 28000, 26800, 26800, 28900, 30100]
}
```

```json
// 七自由度：
{
  "state": "current_joint_voltage",
  "joint_voltage": [27500, 28000, 26800, 26800, 28900, 30100, 31100]
}
```

## 坐标系查询集

### 查询当前工具`get_current_tool_frame`

- **输入参数**

| 参数                     | 类型     | 说明           |
| :----------------------- | :------- | :------------- |
| `get_current_tool_frame` | `string` | 查询当前工具。 |

- **输出参数**

| 参数                 | 类型     | 说明               |
| :------------------- | :------- | :----------------- |
| `current_tool_frame` | `string` | 返回当前工具信息。 |

- **代码示例**

**输入**

```json
//  实现：查询当前工具。

{ "command": "get_current_tool_frame" }
```

**输出**

```json
// 返回当前工具信息,如下：

// 工具名称：tool2_frame；
// 工具位置：x：0.1m，y:0.2m，z：0.03m；
// 位置精度：0.001mm；
// 工具姿态：rx：0.4rad，ry：0.5rad，rz：0.6rad；
// 姿态精度：0.001rad；
// 重量：payload：5kg精度0.001kg；
// 质心：position：1mm精度0.001mm。
```

```json
{
  "state": "current_tool_frame",
  "tool_name": "tool2_frame",
  "pose": [100000, 200000, 30000, 400, 500, 600],
  "payload": 5000,
  "position": [1000, 2000, 3000]
}
```

### 查询已有所有工具名称`get_total_tool_frame`

- **输入参数**

| 参数                   | 类型     | 说明                   |
| :--------------------- | :------- | :--------------------- |
| `get_total_tool_frame` | `string` | 查询已有所有工具名称。 |

- **输出参数**

| 参数               | 类型     | 说明               |
| :----------------- | :------- | :----------------- |
| `total_tool_frame` | `string` | 返回所有工具名称。 |

- **代码示例**

**输入**

```json
//  实现：查询已有所有工具名称。

{ "command": "get_total_tool_frame" }
```

**输出**

```json
// 返回所有工具名称，共 10 个。工具名称：base_tool1，base_tool2，其中“NULL”为空坐标系，未建立。
{
    "state":"total_tool_frame",
    "tool_names":["base_tool1","base_tool2"….,"NULL"]
}
```

### 查询指定工具信息`get_tool_frame`

- **输入参数**

| 参数             | 类型     | 说明               |
| :--------------- | :------- | :----------------- |
| `get_tool_frame` | `string` | 查询指定工具信息。 |
| `tool_name`      | `string` | 工具名称。         |

- **输出参数**

| 参数               | 类型    | 说明               |
| :----------------- | :------ | :----------------- |
| `given_tool_frame` | `sting` | 返回指定工具信息。 |

- **代码示例**

**输入**

```json
//  实现：查询指定工具信息。

{ "command": "get_tool_frame", "tool_name": "tool" }
```

**输出**

```json
//  返回指定工具信息，如下：

//  工具名称：tool2_frame,
//  工具位置：x：0.1m，y:0.2m，z：0.03m，位置精度：0.001mm
//  工具姿态：rx：0.4rad，ry：0.5rad，rz：0.6rad，姿态精度：0.001rad
//  重量：payload：5kg精度0.001kg
//  质心：position：1mm精度0.001mm。
```

```json
// 成功：
{
  "state": "given_tool_frame",
  "tool_name": "tool2_frame",
  "pose": [100000, 200000, 30000, 400, 500, 600],
  "payload": 5000,
  "position": [1000, 2000, 3000]
}
```

```json
// 失败：
{
  "command": "get_tool_frame",
  "get_state": false
}
```

### 查询当前工作坐标系`get_current_work_frame`

- **输入参数**

| 参数                     | 类型     | 说明                 |
| :----------------------- | :------- | :------------------- |
| `get_current_work_frame` | `string` | 查询当前工作坐标系。 |

- **输出参数**

| 参数                 | 类型     | 说明                     |
| :------------------- | :------- | :----------------------- |
| `current_work_frame` | `string` | 返回当前工作坐标系信息。 |

- **代码示例**

**输入**

```json
//  实现：查询当前工作坐标系。

{ "command": "get_current_work_frame" }
```

**输出**

```json
// 返回当前工作坐标系信息，如下：

// 坐标系名称：work2_frame，
// 坐标系位置：x：0.1m，y:0.2m，z：0.03m，位置精度：0.001mm；
// 坐标系姿态：rx：0.4rad，ry：0.5rad，rz：0.6rad，姿态精度：0.001rad。
{
  "state": "current_work_frame",
  "frame_name": "work2_frame",
  "pose": [100000, 200000, 30000, 400, 500, 600]
}
```

### 查询已有所有工作坐标系名称`get_total_work_frame`

- **输入参数**

| 参数                   | 类型     | 说明                         |
| :--------------------- | :------- | :--------------------------- |
| `get_total_work_frame` | `string` | 查询已有所有工作坐标系名称。 |

- **输出参数**

| 参数               | 类型     | 说明                     |
| :----------------- | :------- | :----------------------- |
| `total_work_frame` | `string` | 返回所有工作坐标系名称。 |

- **代码示例**
  **输入**

```json
//  实现：查询已有所有工作坐标系名称。

{ "command": "get_total_work_frame" }
```

**输出**

```json
// 返回所有工作坐标系名称，坐标系名称：work1,work2,…。

{
  "state": "total_work_frame",
  "frame_names": ["work1", "work2", "NULL"]
}
```

### 查询指定工作坐标系`get_work_frame`

- **输入参数**

| 参数             | 类型     | 说明                 |
| :--------------- | :------- | :------------------- |
| `get_work_frame` | `string` | 查询指定工作坐标系。 |
| `frame_name`     | `string` | 坐标系名称           |

- **输出参数**

| 参数               | 类型     | 说明                 |
| :----------------- | :------- | :------------------- |
| `given_work_frame` | `string` | 返回指定坐标系信息。 |

- **代码示例**

**输入**

```json
//  实现：查询指定工作坐标系。

{ "command": "get_work_frame", "frame_name": "work1" }
```

**输出**

```json
// 返回指定坐标系信息，如下：

// 坐标系名称：work2_frame，
// 坐标系位置：x：0.1m，y:0.2m，z：0.03m，位置精度：0.001mm
// 坐标系姿态：rx：0.4rad，ry：0.5rad，rz：0.6rad，姿态精度：0.001rad。
```

```json
// 成功：
{
  "state": "given_work_frame",
  "frame_name": "work2_frame",
  "pose": [100000, 200000, 30000, 400, 500, 600]
}
```

```json
// 失败：
{ "command": "get_work_frame", "get_state": false }
```

## 机械臂初始状态

### 设置初始状态`set_init_pose`

- **输入参数**

| 参数            | 类型     | 说明                      |
| :-------------- | :------- | :------------------------ |
| `set_init_pose` | `string` | 设置初始状态。            |
| `init_pose`     | `int`    | 初始状态位置，精度 0.001° |

- **输出参数**

| 参数        | 类型   | 说明                                  |
| :---------- | :----- | :------------------------------------ |
| `init_pose` | `bool` | `ture`：设置成功；`false`：设置失败。 |

- **代码示例**

**输入**

```json
// 实现：设置初始状态，参数如下：

// 六自由度系机械臂初始状态位置[10°,0°,20°,30°,0°,20°]。
// 七自由度系机械臂初始状态位置[10°,0°,20°,30°,0°,20°,20°]。
```

```json
// 六自由度：
{ "command": "set_init_pose", "init_pose": [10000, 0, 20000, 30000, 0, 20000] }
```

```json
// 七自由度：
{
  "command": "set_init_pose",
  "init_pose": [10000, 0, 20000, 30000, 0, 20000, 20000]
}
```

**输出**

```json
{
  "command": "set_init_pose",
  "init_pose": true
}
```

### 查询初始位置`get_init_pose`

- **输入参数**

| 参数            | 类型     | 说明           |
| :-------------- | :------- | :------------- |
| `get_init_pose` | `string` | 查询初始位置。 |

- **输出参数**

| 参数            | 类型     | 说明           |
| :-------------- | :------- | :------------- |
| `arm_init_pose` | `string` | 反馈初始位置。 |
| `init_pose`     | `int`    | 精度 0.001°    |

- **代码示例**

**输入**

```json
//  实现：查询初始位置。

{ "command": "get_init_pose" }
```

**输出**

```json
// 六自由度：
{
  "state": "arm_init_pose",
  "init_pose": [10000, 0, 20000, 30000, 0, 20000]
}
```

```json
// 七自由度：
{
  "state": "arm_init_pose",
  "init_pose": [10000, 0, 20000, 30000, 0, 20000, 20000]
}
```

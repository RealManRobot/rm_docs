import{_ as n,c as a,o as s,a3 as p}from"./chunks/framework.DpFyhY0e.js";const g=JSON.parse('{"title":"1.rm_moveit_config说明","description":"","frontmatter":{},"headers":[],"relativePath":"robot/ros/moveitConfig.md","filePath":"robot/ros/moveitConfig.md","lastUpdated":null}'),l={name:"robot/ros/moveitConfig.md"},e=p(`<h1 id="_1-rm-moveit-config说明" tabindex="-1">1.rm_moveit_config说明 <a class="header-anchor" href="#_1-rm-moveit-config说明" aria-label="Permalink to &quot;1.rm\\_moveit\\_config说明&quot;">​</a></h1><p>rm_moveit_config文件夹为实现moveit控制真实机械臂的功能包，该功能包的主要作用为调用官方的moveit框架，结合我们机械臂本身的URDF生成适配于我们机械臂的moveit的配置和启动文件，通过该功能包我们可以实现moveit控制虚拟机械臂和控制真实机械臂。</p><ol><li>功能包使用。</li><li>功能包架构说明。</li><li>功能包话题说明。</li></ol><p>通过这三部分内容的介绍可以帮助大家：</p><ol><li>了解该功能包的使用。</li><li>熟悉功能包中的文件构成及作用。</li><li>熟悉功能包相关的话题，方便开发和使用。</li></ol><p>代码链接：<a href="https://github.com/RealManRobot/rm_robot/tree/main/rm_moveit_config%E3%80%82" target="_blank" rel="noreferrer">https://github.com/RealManRobot/rm_robot/tree/main/rm_moveit_config。</a></p><h1 id="_2-rm-moveit-config使用" tabindex="-1">2.rm_moveit_config使用 <a class="header-anchor" href="#_2-rm-moveit-config使用" aria-label="Permalink to &quot;2.rm\\_moveit\\_config使用&quot;">​</a></h1><h2 id="_2-1moveit控制虚拟机械臂" tabindex="-1">2.1moveit控制虚拟机械臂 <a class="header-anchor" href="#_2-1moveit控制虚拟机械臂" aria-label="Permalink to &quot;2.1moveit控制虚拟机械臂&quot;">​</a></h2><p>首先配置好环境完成连接后我们可以通过以下命令直接启动节点。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rm@rm-desktop:~$ roslaunch rm_&lt;arm_type&gt;_moveit_config demo.launch</span></span></code></pre></div><p>在实际使用时需要将以上的&lt;arm_type&gt;更换为实际的机械臂型号，可选择的机械臂型号有65、eco65、75六维力的型号有65_6f、eco65_6f、75_6f。</p><p>63机械臂需要使用以下指令启动，63的六维力型号为63_6f。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rm@rm-desktop:~$ roslaunch rml_63_moveit_config demo.launch</span></span></code></pre></div><p>例如65机械臂的启动命令：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rm@rm-desktop:~$ roslaunch rm_65_moveit_config demo.launch</span></span></code></pre></div><p>节点启动成功后，将显示以下画面。</p><p><img src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/meonaA7KGJ8anXxj/img/51b76caa-000d-481d-b159-b41199396fdd.png" alt="image.png"></p><p>接下来我们可以通过拖动控制球使机械臂到达目标位置，然后点击规划执行。</p><p><img src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/meonaA7KGJ8anXxj/img/dfe2b1ff-87b3-4327-986f-7873709d0513.png" alt="image.png"></p><p>规划执行。</p><p><img src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/meonaA7KGJ8anXxj/img/1c844bd8-688b-4e68-a1b9-1203ff3e5c21.png" alt="image.png"></p><h2 id="_2-2-moveit控制真实机械臂" tabindex="-1">2.2 moveit控制真实机械臂 <a class="header-anchor" href="#_2-2-moveit控制真实机械臂" aria-label="Permalink to &quot;2.2 moveit控制真实机械臂&quot;">​</a></h2><p>控制真实机械臂需要的控制指令相对较多一些，如下为详细的控制方式。</p><p>首先运行底盘驱动节点。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rm@rm-desktop:~$ roslaunch rm_driver rm_&lt;arm_type&gt;_driver.launch</span></span></code></pre></div><p>之后需要运行中间功能包rm_control的相关节点。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rm@rm-desktop:~$ roslaunch rm_control rm_&lt;arm_type&gt;_control.launch.py</span></span></code></pre></div><p>最终需要启动控制真实机械臂的moveit节点。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rm@rm-desktop:~$ roslaunch rm_&lt;arm_type&gt;_config demo_realrobot.launch</span></span></code></pre></div><p>注意以上指令均需要将&lt;arm_type&gt;更换为对应的机械臂型号，可选择的型号有65、eco65、75、65_6f、eco65_6f、75_6f。</p><p>注意在使用63时应使用如下启动指令，若使用六维力设备时，应将63更换为63_6f。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rm@rm-desktop:~$ roslaunch rml_63_config demo_realrobot.launch</span></span></code></pre></div><p>完成以上操作后将会出现以下界面，我们可以通过拖动控制球的方式控制机械臂运动。</p><p><img src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/meonaA7KGJ8anXxj/img/29a5d9f5-84f5-4e59-baed-915bc3ca59f4.png" alt="image.png"></p><h1 id="_3-rm-moveit-config架构说明" tabindex="-1">3.rm_moveit_config架构说明 <a class="header-anchor" href="#_3-rm-moveit-config架构说明" aria-label="Permalink to &quot;3.rm\\_moveit\\_config架构说明&quot;">​</a></h1><h2 id="_3-1功能包文件总览" tabindex="-1">3.1功能包文件总览 <a class="header-anchor" href="#_3-1功能包文件总览" aria-label="Permalink to &quot;3.1功能包文件总览&quot;">​</a></h2><p>当前rm_driver功能包的文件构成如下。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>    ├── rm_65_moveit_config              #65机械臂moveit功能包</span></span>
<span class="line"><span>    │   ├── CMakeLists.txt                   #65机械臂moveit功能包编译规则</span></span>
<span class="line"><span>    │   ├── config                           #65机械臂moveit2功能包参数文件</span></span>
<span class="line"><span>    │   │   ├── cartesian_limits.yaml</span></span>
<span class="line"><span>    │   │   ├── chomp_planning.yaml</span></span>
<span class="line"><span>    │   │   ├── controllers_gazebo.yaml        #gazebo仿真控制器</span></span>
<span class="line"><span>    │   │   ├── controllers.yaml               #真实机械臂控制器</span></span>
<span class="line"><span>    │   │   ├── fake_controllers.yaml</span></span>
<span class="line"><span>    │   │   ├── joint_limits.yaml                #65机械臂关节限制</span></span>
<span class="line"><span>    │   │   ├── kinematics.yaml                #65机械臂运动学参数</span></span>
<span class="line"><span>    │   │   ├── ompl_planning.yaml</span></span>
<span class="line"><span>    │   │   ├── rm_65.srdf                      #65机械臂moveit控制配置文件</span></span>
<span class="line"><span>    │   │   ├── ros_controllers.yaml              #65机械臂运动控制器</span></span>
<span class="line"><span>    │   │   └── sensors_3d.yaml</span></span>
<span class="line"><span>    │   ├── launch</span></span>
<span class="line"><span>    │   │   ├── chomp_planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── default_warehouse_db.launch</span></span>
<span class="line"><span>    │   │   ├── demo_gazebo.launch            #65仿真机械臂moveit2启动文件</span></span>
<span class="line"><span>    │   │   ├── demo.launch                    #65虚拟机械臂moveit2启动文件</span></span>
<span class="line"><span>    │   │   ├── demo_realrobot.launch           #65真实机械臂moveit2启动文件</span></span>
<span class="line"><span>    │   │   ├── fake_moveit_controller_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── gazebo.launch</span></span>
<span class="line"><span>    │   │   ├── joystick_control.launch</span></span>
<span class="line"><span>    │   │   ├── move_group.launch</span></span>
<span class="line"><span>    │   │   ├── moveit_planning_execution.launch</span></span>
<span class="line"><span>    │   │   ├── moveit.rviz</span></span>
<span class="line"><span>    │   │   ├── moveit_rviz.launch</span></span>
<span class="line"><span>    │   │   ├── ompl_planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── pilz_industrial_motion_planner_planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── planning_context.launch</span></span>
<span class="line"><span>    │   │   ├── planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── rm_65_moveit_controller_manager.launch(复件).xml</span></span>
<span class="line"><span>    │   │   ├── rm_65_moveit_controller_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── rm_65_moveit_sensor_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── ros_controllers.launch</span></span>
<span class="line"><span>    │   │   ├── run_benchmark_ompl.launch</span></span>
<span class="line"><span>    │   │   ├── sensor_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── setup_assistant.launch</span></span>
<span class="line"><span>    │   │   ├── trajectory_execution.launch(复件).xml</span></span>
<span class="line"><span>    │   │   ├── trajectory_execution.launch.xml</span></span>
<span class="line"><span>    │   │   ├── warehouse.launch</span></span>
<span class="line"><span>    │   │   └── warehouse_settings.launch.xml</span></span>
<span class="line"><span>    │   └── package.xml</span></span>
<span class="line"><span>    ├── rm_75_moveit_config           #75机械臂moveit功能包（文件解释参考65）</span></span>
<span class="line"><span>    │   ├── CMakeLists.txt</span></span>
<span class="line"><span>    │   ├── config</span></span>
<span class="line"><span>    │   │   ├── cartesian_limits.yaml</span></span>
<span class="line"><span>    │   │   ├── chomp_planning.yaml</span></span>
<span class="line"><span>    │   │   ├── controllers_gazebo.yaml</span></span>
<span class="line"><span>    │   │   ├── controllers.yaml</span></span>
<span class="line"><span>    │   │   ├── fake_controllers.yaml</span></span>
<span class="line"><span>    │   │   ├── joint_limits.yaml</span></span>
<span class="line"><span>    │   │   ├── kinematics.yaml</span></span>
<span class="line"><span>    │   │   ├── ompl_planning.yaml</span></span>
<span class="line"><span>    │   │   ├── rm_75.srdf</span></span>
<span class="line"><span>    │   │   ├── ros_controllers.yaml</span></span>
<span class="line"><span>    │   │   └── sensors_3d.yaml</span></span>
<span class="line"><span>    │   ├── launch</span></span>
<span class="line"><span>    │   │   ├── chomp_planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── default_warehouse_db.launch</span></span>
<span class="line"><span>    │   │   ├── demo_gazebo.launch</span></span>
<span class="line"><span>    │   │   ├── demo.launch</span></span>
<span class="line"><span>    │   │   ├── demo_realrobot.launch</span></span>
<span class="line"><span>    │   │   ├── fake_moveit_controller_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── gazebo.launch</span></span>
<span class="line"><span>    │   │   ├── joystick_control.launch</span></span>
<span class="line"><span>    │   │   ├── move_group.launch</span></span>
<span class="line"><span>    │   │   ├── moveit_planning_execution.launch</span></span>
<span class="line"><span>    │   │   ├── moveit.rviz</span></span>
<span class="line"><span>    │   │   ├── moveit_rviz.launch</span></span>
<span class="line"><span>    │   │   ├── ompl_planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── pilz_industrial_motion_planner_planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── planning_context.launch</span></span>
<span class="line"><span>    │   │   ├── planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── rm_75_moveit_controller_manager.launch(复件).xml</span></span>
<span class="line"><span>    │   │   ├── rm_75_moveit_controller_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── rm_75_moveit_sensor_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── ros_controllers.launch</span></span>
<span class="line"><span>    │   │   ├── run_benchmark_ompl.launch</span></span>
<span class="line"><span>    │   │   ├── sensor_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── setup_assistant.launch</span></span>
<span class="line"><span>    │   │   ├── trajectory_execution.launch.xml</span></span>
<span class="line"><span>    │   │   ├── warehouse.launch</span></span>
<span class="line"><span>    │   │   └── warehouse_settings.launch.xml</span></span>
<span class="line"><span>    │   └── package.xml</span></span>
<span class="line"><span>    ├── rm_eco65_moveit_config       #ECO65机械臂moveit功能包（文件解释参考65）</span></span>
<span class="line"><span>    │   ├── CMakeLists.txt</span></span>
<span class="line"><span>    │   ├── config</span></span>
<span class="line"><span>    │   │   ├── cartesian_limits.yaml</span></span>
<span class="line"><span>    │   │   ├── chomp_planning.yaml</span></span>
<span class="line"><span>    │   │   ├── controllers_gazebo.yaml</span></span>
<span class="line"><span>    │   │   ├── controllers.yaml</span></span>
<span class="line"><span>    │   │   ├── fake_controllers.yaml</span></span>
<span class="line"><span>    │   │   ├── gazebo_controllers.yaml</span></span>
<span class="line"><span>    │   │   ├── gazebo_rm_eco65.urdf</span></span>
<span class="line"><span>    │   │   ├── joint_limits.yaml</span></span>
<span class="line"><span>    │   │   ├── kinematics.yaml</span></span>
<span class="line"><span>    │   │   ├── ompl_planning.yaml</span></span>
<span class="line"><span>    │   │   ├── rm_eco65.srdf</span></span>
<span class="line"><span>    │   │   ├── ros_controllers.yaml</span></span>
<span class="line"><span>    │   │   ├── sensors_3d.yaml</span></span>
<span class="line"><span>    │   │   ├── simple_moveit_controllers.yaml</span></span>
<span class="line"><span>    │   │   └── stomp_planning.yaml</span></span>
<span class="line"><span>    │   ├── launch</span></span>
<span class="line"><span>    │   │   ├── chomp_planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── default_warehouse_db.launch</span></span>
<span class="line"><span>    │   │   ├── demo_gazebo.launch</span></span>
<span class="line"><span>    │   │   ├── demo.launch</span></span>
<span class="line"><span>    │   │   ├── demo_realrobot.launch</span></span>
<span class="line"><span>    │   │   ├── fake_moveit_controller_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── gazebo.launch</span></span>
<span class="line"><span>    │   │   ├── joystick_control.launch</span></span>
<span class="line"><span>    │   │   ├── move_group.launch</span></span>
<span class="line"><span>    │   │   ├── moveit_planning_execution.launch</span></span>
<span class="line"><span>    │   │   ├── moveit.rviz</span></span>
<span class="line"><span>    │   │   ├── moveit_rviz.launch</span></span>
<span class="line"><span>    │   │   ├── ompl-chomp_planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── ompl_planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── pilz_industrial_motion_planner_planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── planning_context.launch</span></span>
<span class="line"><span>    │   │   ├── planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── rm_eco65_moveit_controller_manager.launch copy.xml</span></span>
<span class="line"><span>    │   │   ├── rm_eco65_moveit_controller_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── rm_eco65_moveit_sensor_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── ros_controllers.launch</span></span>
<span class="line"><span>    │   │   ├── ros_control_moveit_controller_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── run_benchmark_ompl.launch</span></span>
<span class="line"><span>    │   │   ├── sensor_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── setup_assistant.launch</span></span>
<span class="line"><span>    │   │   ├── simple_moveit_controller_manager.launch.xml</span></span>
<span class="line"><span>    │   │   ├── stomp_planning_pipeline.launch.xml</span></span>
<span class="line"><span>    │   │   ├── trajectory_execution.launch.xml</span></span>
<span class="line"><span>    │   │   ├── warehouse.launch</span></span>
<span class="line"><span>    │   │   └── warehouse_settings.launch.xml</span></span>
<span class="line"><span>    │   └── package.xml</span></span>
<span class="line"><span>    └── rml_63_moveit_config          #63机械臂moveit功能包（文件解释参考65）</span></span>
<span class="line"><span>        ├── CMakeLists.txt</span></span>
<span class="line"><span>        ├── config</span></span>
<span class="line"><span>        │   ├── cartesian_limits.yaml</span></span>
<span class="line"><span>        │   ├── chomp_planning.yaml</span></span>
<span class="line"><span>        │   ├── controllers_gazebo.yaml</span></span>
<span class="line"><span>        │   ├── controllers.yaml</span></span>
<span class="line"><span>        │   ├── fake_controllers.yaml</span></span>
<span class="line"><span>        │   ├── joint_limits.yaml</span></span>
<span class="line"><span>        │   ├── kinematics.yaml</span></span>
<span class="line"><span>        │   ├── ompl_planning.yaml</span></span>
<span class="line"><span>        │   ├── rml_63_description.srdf</span></span>
<span class="line"><span>        │   ├── ros_controllers.yaml</span></span>
<span class="line"><span>        │   └── sensors_3d.yaml</span></span>
<span class="line"><span>        ├── launch</span></span>
<span class="line"><span>        │   ├── chomp_planning_pipeline.launch.xml</span></span>
<span class="line"><span>        │   ├── default_warehouse_db.launch</span></span>
<span class="line"><span>        │   ├── demo_gazebo.launch</span></span>
<span class="line"><span>        │   ├── demo.launch</span></span>
<span class="line"><span>        │   ├── demo_realrobot.launch</span></span>
<span class="line"><span>        │   ├── fake_moveit_controller_manager.launch(复件).xml</span></span>
<span class="line"><span>        │   ├── fake_moveit_controller_manager.launch.xml</span></span>
<span class="line"><span>        │   ├── gazebo.launch</span></span>
<span class="line"><span>        │   ├── joystick_control.launch</span></span>
<span class="line"><span>        │   ├── move_group.launch</span></span>
<span class="line"><span>        │   ├── moveit_planning_execution.launch</span></span>
<span class="line"><span>        │   ├── moveit.rviz</span></span>
<span class="line"><span>        │   ├── moveit_rviz.launch</span></span>
<span class="line"><span>        │   ├── ompl_planning_pipeline.launch.xml</span></span>
<span class="line"><span>        │   ├── pilz_industrial_motion_planner_planning_pipeline.launch.xml</span></span>
<span class="line"><span>        │   ├── planning_context.launch</span></span>
<span class="line"><span>        │   ├── planning_pipeline.launch.xml</span></span>
<span class="line"><span>        │   ├── rml_63_description_moveit_controller_manager.launch.xml</span></span>
<span class="line"><span>        │   ├── rml_63_description_moveit_sensor_manager.launch.xml</span></span>
<span class="line"><span>        │   ├── ros_controllers.launch</span></span>
<span class="line"><span>        │   ├── run_benchmark_ompl.launch</span></span>
<span class="line"><span>        │   ├── sensor_manager.launch.xml</span></span>
<span class="line"><span>        │   ├── setup_assistant.launch</span></span>
<span class="line"><span>        │   ├── trajectory_execution.launch.xml</span></span>
<span class="line"><span>        │   ├── warehouse.launch</span></span>
<span class="line"><span>        │   └── warehouse_settings.launch.xml</span></span>
<span class="line"><span>        └── package.xml</span></span></code></pre></div><h1 id="_4-rm-moveit-config话题说明" tabindex="-1">4.rm_moveit_config话题说明 <a class="header-anchor" href="#_4-rm-moveit-config话题说明" aria-label="Permalink to &quot;4.rm\\_moveit\\_config话题说明&quot;">​</a></h1><p>关于moveit的话题说明，为使其话题结构更加清晰明白在这里以节点话题的数据流图的方式进行查看和讲解。</p><p>在启动如上控制真实机器人的节点后可以运行如下指令查看当前话题的对接情况。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rm@rm-desktop:~$ rosrun rqt_graph rqt_graph</span></span></code></pre></div><p>运行成功后界面将显示如下画面。</p><p><img src="https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/meonaA7KGJ8anXxj/img/1ece6fb3-bc1f-4ebb-9653-e6021ec42b05.png" alt="image.png"></p><p>该图反应了当前运行的节点与节点之间的话题通信关系，首先查看/rm_driver节点，该节点在moveit运行时订阅和发布的话题如下。</p><p>由图可知，rm_driver发布的/joint_states话题在持续被/robot_state_publiser节点和/move_group节点订阅。/robot_state_publiser接收/joint_states是为了持续发布关节间的TF变换；/move_group是moveit的相关节点，moveit在规划时也需要实时获取当前机械臂的关节状态信息，所以也订阅了该话题。</p><p>由图可知rm_driver还订阅了rm_control的/rm_driver/jointPos话题，该话题是机械臂透传功能的话题，通过该话题rm_control将规划的关节点位发布给rm_driver节点控制机械臂进行运动。</p><p>rm_control为rm_driver与moveit之间通信的桥梁，其通过/rm_group /follow_joint_trajectory动作与/move_group进行通信，获取规划点，并进行插值运算，将插值之后的数据通过透传的方式给到rm_driver。</p>`,48),i=[e];function c(o,t,r,m,_,h){return s(),a("div",null,i)}const d=n(l,[["render",c]]);export{g as __pageData,d as default};
